/* ======================================================
   GridStack â€“ Production Motion System (Tokenized)
   ====================================================== */

/* =============================
   CONTAINER
   ============================= */

.container {
  position: relative;
  width: 100%;
  background: var(--color-background-white);
  overflow: hidden;
}

/* Grid background aligned with JS-calculated cells */
.container.showGrid::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: var(--z-index-0);

  --cell-w: var(--gs-cell-w, 50px);
  --cell-h: var(--gs-cell-h, 50px);
  --offset-x: var(--gs-offset-x, 0px);
  --offset-y: var(--gs-offset-y, 0px);

  --grid-color: rgba(40, 40, 40, 0.04);
  --grid-line: var(--border-width-xs);

  background-image:
    linear-gradient(to right, var(--grid-color) var(--grid-line), transparent var(--grid-line)),
    linear-gradient(to bottom, var(--grid-color) var(--grid-line), transparent var(--grid-line));

  background-size: var(--cell-w) var(--cell-h);
  background-position: var(--offset-x) var(--offset-y);
  background-repeat: repeat;
  opacity: var(--opacity-100);
}

.grid {
  position: relative;
  width: 100%;
  z-index: var(--z-index-10);
}


/* =============================
   GRID ITEM
   ============================= */

.gridItem {
  position: absolute;
  background: var(--color-background-white);
  border-radius: var(--border-radius-lg);
  overflow: hidden;

  border: var(--border-width-xs) solid var(--color-neutral-gray);
  box-shadow: var(--box-shadow-xs);

  transform-origin: 0 0;
  will-change: transform;
  transition: box-shadow 180ms ease;
}

.gridItem:hover {
  box-shadow: var(--box-shadow-xs);
}

.static {
  opacity: var(--opacity-75);
}

.draggingItem {
  opacity: var(--opacity-0);
  pointer-events: none;
}


/* =============================
   INNER WRAPPER (FLIP ENGINE)
   ============================= */

.gridItemInner {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;

  transform: translateZ(0);
  backface-visibility: hidden;

  will-change: transform, opacity;
}


/* =============================
   PREVIEW STATES
   ============================= */

.previewMoving {
  z-index: var(--z-index-50);
  box-shadow: var(--box-shadow-xs);
}

.previewReverting {
  z-index: var(--z-index-40);
  box-shadow: var(--box-shadow-xs);
}


/* =============================
   DROP SUCCESS
   ============================= */

.dropSuccess {
  animation: gs-drop-glow 320ms ease;
}

@keyframes gs-drop-glow {
  0% {
    box-shadow: 0 0 0 rgba(0, 98, 255, 0);
  }
  50% {
    box-shadow: 0 0 0 4px var(--color-background-secondary-light);
  }
  100% {
    box-shadow: var(--box-shadow-xs);
  }
}


/* =============================
   DROP INDICATOR
   ============================= */

.dropIndicator {
  position: absolute;
  z-index: var(--z-index-999);

  background: var(--color-background-secondary-light);
  border: var(--border-width-lg) dashed var(--color-secondary-blue);
  border-radius: var(--border-radius-md);

  animation: gs-indicator-pulse 1.2s infinite ease-in-out;

  will-change: transform, width, height;
}

@keyframes gs-indicator-pulse {
  0%   { opacity: var(--opacity-50); }
  50%  { opacity: var(--opacity-100); }
  100% { opacity: var(--opacity-50); }
}


/* =============================
   HEADER
   ============================= */

.header {
  height: 40px;
  display: flex;
  align-items: center;
  padding: var(--spacing-sm) var(--spacing-lg);

  cursor: grab;
  user-select: none;

  background: linear-gradient(
    180deg,
    var(--color-background-gray-light),
    transparent
  );

  border-bottom: var(--border-width-xs) solid var(--color-neutral-gray);
}

.header:active {
  cursor: grabbing;
}

.title {
  flex: 1;
  font-family: var(--font-family-sans);
  font-weight: var(--font-weight-semibold);
  font-size: var(--font-size-md);
  color: var(--color-text-black);
}


/* =============================
   CONTENT
   ============================= */

.content {
  overflow: auto;
  height: 100%;
}


/* =============================
   RESIZE HANDLE
   ============================= */

.resizeHandle {
  position: absolute;
  width: 14px;
  height: 14px;
  border-radius: var(--border-radius-xs);

  background: var(--color-secondary-blue);
  opacity: var(--opacity-0);

  transition: opacity 150ms ease;
}

.gridItem:hover .resizeHandle {
  opacity: var(--opacity-100);
}


/* =============================
   ACCESSIBILITY
   ============================= */

@media (prefers-reduced-motion: reduce) {
  .gridItem,
  .gridItemInner,
  .dropIndicator {
    will-change: auto !important;
  }
}


/* =============================
   SOFT DISPLACEMENT
   ============================= */

.softDisplaced {
  will-change: transform, opacity;
  backface-visibility: hidden;
  transform-style: preserve-3d;
  perspective: 900px;
}
